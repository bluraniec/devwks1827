## Chapter 4 - SERVICE DEPLOYMENT

> Done! Package is finished! Congratz! ðŸ’¥ <br>
> Let's test our Service and check how does it work! :point_right: :computer:

### 1st step - Login back to the NSO:
Let's login to our NSO instance as user admin using `ncs_cli -C -u admin` command:
```
root@45a559b161b4:/opt# ncs_cli -C -u admin

admin connected from 127.0.0.1 using console on 45a559b161b4
admin@ncs#
```

### 2nd step - Reload packages:
Reload packages using command `packages reload` to see our new package inside of NSO:
```
admin@ncs# packages reload

>>> System upgrade is starting.
>>> Sessions in configure mode must exit to operational mode.
>>> No configuration changes can be performed until upgrade has completed.
>>> System upgrade has completed successfully.
reload-result {
    package ACL_SERVICE
    result true
}
reload-result {
    package cisco-ios
    result true
}
reload-result {
    package cisco-iosxr
    result true
}
reload-result {
    package juniper-junos
    result true
}
admin@ncs#
System message at 2019-05-28 16:21:47...
    Subsystem stopped: ncs-dp-1-cisco-ios:IOSDp
admin@ncs#
System message at 2019-05-28 16:21:47...
    Subsystem started: ncs-dp-2-cisco-ios:IOSDp
admin@ncs#
System message at 2019-05-28 16:21:47...
    Subsystem stopped: ec_junos_ext_vlan_hook_daemon
admin@ncs#
System message at 2019-05-28 16:21:47...
    Subsystem started: ec_junos_ext_vlan_hook_daemon
```

### 3rd step - Go to config mode:
```
admin@ncs# config
```

### 4th step - Try the Service:
```
admin@ncs(config)# ACL_SERVICE IOS0 interface 0/1 direction in
```

### 5th step - Check the Service:
```
admin@ncs(config-ACL_SERVICE-IOS0)# commit dry-run
cli {
    local-node {
        data  devices {
                  device IOS0 {
                      config {
                          ios:ip {
                              access-list {
                                  standard {
             +                        std-named-acl ACL_CLUS {
             +                            std-access-list-rule "permit 172.16.0.0 0.0.255.255";
             +                            std-access-list-rule "deny 192.168.34.0 0.0.0.255";
             +                        }
                                  }
                              }
                          }
                          ios:interface {
                              GigabitEthernet 0/1 {
                                  ip {
             +                        access-group in {
             +                            access-list ACL_CLUS;
             +                        }
                                  }
                              }
                          }
                      }
                  }
              }
             +ACL_SERVICE IOS0 {
             +    ios {
             +        interface 0/1;
             +        direction in;
             +    }
             +}
    }
}
```

```
admin@ncs(config-ACL_SERVICE-IOS0)# commit dry-run outformat xml
result-xml {
    local-node {
        data <devices xmlns="http://tail-f.com/ns/ncs">
               <device>
                 <name>IOS0</name>
                 <config>
                   <ip xmlns="urn:ios">
                     <access-list>
                       <standard>
                         <std-named-acl>
                           <name>ACL_CLUS</name>
                           <std-access-list-rule>
                             <rule>permit 172.16.0.0 0.0.255.255</rule>
                           </std-access-list-rule>
                           <std-access-list-rule>
                             <rule>deny 192.168.34.0 0.0.0.255</rule>
                           </std-access-list-rule>
                         </std-named-acl>
                       </standard>
                     </access-list>
                   </ip>
                   <interface xmlns="urn:ios">
                     <GigabitEthernet>
                       <name>0/1</name>
                       <ip>
                         <access-group>
                           <direction>in</direction>
                           <access-list>ACL_CLUS</access-list>
                         </access-group>
                       </ip>
                     </GigabitEthernet>
                   </interface>
                 </config>
               </device>
             </devices>
             <ACL_SERVICE xmlns="http://example.com/ACL_SERVICE">
               <device>IOS0</device>
               <ios>
                 <interface>0/1</interface>
                 <direction>in</direction>
               </ios>
             </ACL_SERVICE>
    }
}
```

```
admin@ncs(config-ACL_SERVICE-IOS0)# commit dry-run outformat native
native {
    device {
        name IOS0
        data ip access-list standard ACL_CLUS
              permit 172.16.0.0 0.0.255.255
              deny 192.168.34.0 0.0.0.255
             !
             interface GigabitEthernet0/1
              ip access-group ACL_CLUS in
             exit
    }
}
```

```
admin@ncs(config-ACL_SERVICE-IOS0)# commit
Commit complete.
```

### 6th step - Check if it has been configured

```
admin@ncs# show running-config devices device IOS0 config ios:ip access-list standard ACL_CLUS
devices device IOS0
 config
  ios:ip access-list standard ACL_CLUS
   permit 172.16.0.0 0.0.255.255
   deny 192.168.34.0 0.0.0.255
  !
 !
!

admin@ncs# show running-config devices device IOS0 config ios:interface GigabitEthernet 0/1
devices device IOS0
 config
  ios:interface GigabitEthernet0/1
   no switchport
   ip access-group ACL_CLUS in
   no ip address
   no shutdown
  exit
 !
!
```

### 7th step - Check other devices

Execute on single device -> commit dry-run / commit dry-run outformat native -> commit
Create group and execute on group.

---
<h4 align="center">[10/12]</h4>
<h4 align="center"> <a href="/readme/5.md"> :arrow_left: Create the Service! </a> || <a href="/readme/7.md"> Custom UI! :arrow_right: </a> </h4>
