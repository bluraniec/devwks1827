## Chapter 3 - SERVICE CREATION
> Designed! Congratz! :boom:  
> Time to make it real! Let's create our ACL_SERVICE! :construction_worker:

### 1st step - Generate skeleton of the service:
Let's first generate skeleton of our ACL_SERVICE and take a look on its structure.  
Navigate to the `packages` folder:
```
root@ad720ce13193:/opt/ncs-run# cd packages/
```
Generate a skeleton of our `ACL_SERVICE`:
```
root@ad720ce13193:/opt/ncs-run/packages# ncs-make-package --service-skeleton python-and-template ACL_SERVICE
```
Created! Go inside our package and check what's inside:
```
root@ad720ce13193:/opt/ncs-run/packages# cd ACL_SERVICE
root@ad720ce13193:/opt/ncs-run/packages/ACL_SERVICE# ls
README  package-meta-data.xml  python  src  templates  test
```
Generated structure looks following:
```
/ncs-run/packages
├── ACL_SERVICE
│   ├── templates
│   │   └── ACL_SERVICE-template.xml
│   ├── src
│   │   ├── yang
│   │   │   └── ACL_SERVICE.yang
│   │   └── Makefile
│   ├── python
│   │   └── ACL_SERVICE
│   │   │   ├── main.py
│   │   │   └── __init__.py
│   ├── test
│   ├── package-meta-data.xml
│   └── README
└── OTHER_SERVICE
```
We're going to take care of:  
- <b>XML TEMPLATE</b> - /template/ACL_SERVICE-template.xml  
- <b>YANG DATA MODEL</b> - /src/yang/ACL_SERVICE.yang    
- <b>PYTHON LOGIC</b> (optional) - /python/ACL_SERVICE/main.py  


### 2nd step - Create XML TEMPLATE

First part is an XML template of our Service - this will be an actual config pushed to the device.
```
/ncs-run/packages
├── ACL_SERVICE
    └── templates
        └── ACL_SERVICE-template.xml
```
Put sample config on NSO and generate XML from it. Parametrize it.  
First for IOS:
```
devices device IOS0 config ios:ip access-list standard ACL_CLUS
permit 172.16.0.0 0.0.255.255
deny 192.168.34.0 0.0.0.255

devices device IOS0 config ios:interface GigabitEthernet 0/0
ip access-group ACL_CLUS in
```

Then IOS-XR:
```
devices device IOS_XR0 config cisco-ios-xr:ipv4 access-list ACL_CLUS
10 permit 172.16.0.0 0.0.255.255
20 deny 192.168.34.0 0.0.0.255

devices device IOS_XR0 config cisco-ios-xr:interface GigabitEthernet 0/0
ipv4 access-group ACL_CLUS ingress
```

Then Juniper:
```
...
...
...
set interface xe-0/2/0/2 unit 0 family inet filter input ACL_CLUS
```

### 3rd step - Create YANG DATA MODEL

Second part is a YANG Data Model of our Service - this will give us an opportunity to provide the CLI interface to configure our Service. Prepare all parameters structure.
```
/ncs-run/packages
├── ACL_SERVICE
    └── src
        ├── yang
        │   └── ACL_SERVICE.yang
        └── Makefile
```

After creation of the model, go back to the ACL_SERVICE folder and compile the package executing command:
```
make clean all
```

### 4th step - Create PYTHON LOGIC (optional)

Third part is a Python code of our Service - this will give us an opportunity to provide logic to our Service if we need to calculate something before appending to the template or provide some data to configure from 3rd party.
```
/ncs-run/packages
├── ACL_SERVICE
    └── python
        └── ACL_SERVICE
            ├── main.py
            └── __init__.py
```
---
<h4 align="center">[6/9]</h4>
<h4 align="center"> <a href="/readme/4.md"> :arrow_left: Design the Service! </a> || <a href="/readme/6.md"> Deploy the Service! :arrow_right: </a> </h4>
