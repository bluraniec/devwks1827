## Chapter 1 - SETUP

> :white_check_mark: We know already what is the NSO.  
> :arrow_down: Now it's the time to dirty our hands and check the basics of how does it work! <br>
> Let's start! :clap: :muscle: 

### 1st step - Check the structure:
Run `ls` command inside of your NSO container to check the structure of deployed NSO:
```
root@45a559b161b4:/opt# ls
```
<img align="center" width=80% src="/readme/cli_1.png"></img>

Great! We see 2 directories:   
- ncs-4.7.1.1 (installation directory)  
- ncs-run (running directory)  

### 2nd step - Login to NSO:
Let's login to our NSO instance as user admin using `ncs_cli -C -u admin` command:
```
root@45a559b161b4:/opt# ncs_cli -C -u admin
```
<img align="center" width=80% src="/readme/cli_2.png"></img>

We're in! You may wonder why we have used `-C` option here...  
It means that we would like to have Cisco style of the NSO CLI, if you prefer to have a Juniper style of CLI - you can use `-J` option here :) For the purpose of this lab - we will be following Cisco style. 

### 3rd step - Show onboarded devices:
Let's now take a look on what devices we have onboarded in our NSO by issuing command `show devices brief`.
```
admin@ncs# show devices brief
```
<img align="center" width=80% src="/readme/cli_3.png"></img>

You should see these names, addresses and types. 
In our case we have 2 IOS devices, 2 IOS-XR devices and 2 Juniper devices. 
All of them works on localhost because these are our local Netsim simulations.

### 4th step - Show packages:  
Let's see what are the currently existing packages in our NSO instance:
```
admin@ncs# show packages package package-version
```
<img align="center" width=80% src="/readme/cli_4.png"></img>
As of now only NED packages for each vendor type.

### 5th step - Sync configuration from devices to NSO:
NSO is an Orchestrator - so main point in the Network that should have knowledge about all of the configuration in the network devices. Let's synchronize our NSO instance with devices existing in the networ and get these configs there: 
```
admin@ncs# devices sync-from
```
<img align="center" width=80% src="/readme/cli_5.png"></img>
Done! Really? All devices configs available now in the NSO?

Check it! 
For example, take a look if configuration of device IOS0 is present in NSO:
```
admin@ncs# show running-config devices device IOS0
```
Nice! 
What if someone now change something in the network? 
Is NSO going to notice this and retrieve updated config?

Let's check!

Try to change something directly on the device IOS0:
```
root@ad720ce13193:/opt/ncs-run# ncs-netsim cli-i IOS0
admin connected from 127.0.0.1 using console on ad720ce13193
IOS0> en
IOS0# conf t
Enter configuration commands, one per line. End with CNTL/Z.
IOS0(config)# interface GigabitEthernet 0/0
IOS0(config-if)# ip address 1.1.1.1 255.255.255.0
IOS0(config-if)# exit
IOS0(config)# exit
IOS0# exit
```

Get back to NSO and check if configs are synchronized (in-sync):
```
root@ad720ce13193:/opt/ncs-run# ncs_cli -C -u admin
admin@ncs# devices check-sync
```
<img align="center" width=94% src="/readme/cli_6.png"></img>

Ooops! Nope! We're out of synchronization (out-of-sync) due to config change on IOS0 device!

Let's sync again to update config in the NSO with that change:
```
admin@ncs# devices sync-from
```
<img align="center" width=80% src="/readme/cli_7.png"></img>

Success! Is that change really here?
```
admin@ncs# show running-config devices device IOS0
```
Correct!

**Remark:** You can do as well `devices sync-to` in case if you're out-of-sync and someone has made configuration that is not desired. It will then update device configuration with configuration mantained in the NSO for this device.

Important Concepts:  
**package** - basic structure of  
**NED** - Network Element Driver, The NSO device manager is the centre of NSO. The device manager maintains a flat list of all managed devices. NSO keeps the master copy of the configuration for each managed device in CDB. Whenever a configuration change is done to the list of device configuration master copies, the device manager will partition this "network configuration change" into the corresponding changes for the actual managed devices. The device manager passes on the required changes to the NEDs, Network Element Drivers. A NED needs to be installed for every type of device OS, like Cisco IOS NED, Cisco XR NED, Juniper JUNOS NED etc. The NEDs communicate through the native device protocol southbound. 

âœ” Basic setup is done. NSO works, correct NEDs packages are imported so we can talk to these types of devices and Netsim devices are onboarded.

---
<h4 align="center">[4/12]</h4>
<h4 align="center"> <a href="/readme/2.md"> :arrow_left: What are we going to do? </a> || <a href="/readme/4.md"> Design the Service! :arrow_right: </a> </h4>
