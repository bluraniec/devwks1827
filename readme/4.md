## Chapter 2 - SERVICE DESIGN

> :white_check_mark: Great! First touch with NSO is behind us! :clap:  
> Now let's help Carl with his task, let's create a Service for his ACL configuration!  
> :arrow_down: But first we need to design it.

### 1st step - Analyze ACL configurations provided by Carl:
ACL Configurations:

IOS  | IOS-XR | Juniper
------------- | ------------- | ------------- 
 ip access-list standard ACL_CLUS <br> remark Cisco Live US Restrictions <br> permit 172.16.0.0 0.0.255.255 <br> deny 192.168.34.0 0.0.0.255 |ipv4 access-list ACL_CLUS <br> 10 remark Cisco Live US Restrictions <br> 20 permit 172.16.0.0 0.0.255.255 <br> 30 deny 192.168.34.0 0.0.0.255 | [edit firewall family inet] <br> filter ACL_CLUS { <br> term 20 { from { <br> source-address { 172.16.0.0/16; } } <br> then { accept; } }<br> term 30 { from { <br> source-address { 192.168.34.0/24; } } <br> then { reject; } } <br> }

ACL Interface Attachment:

IOS  | IOS-XR | Juniper
------------- | ------------- | ------------- 
interface GigabitEthernet 0/2/0/2 <br> ip access-group ACL_CLUS in | interface GigabitEthernet 0/2/0/2 <br> ipv4 access-group ACL_CLUS-filter in <br> |  set interface xe-0/2/0/2 unit 0 <br> family inet filter input ACL_CLUS  |

### 2nd step - Parametrize:
Let's figure out what in that configuration (for this scenario) is **static** and what will be a **variable**. <br> <br>
For **ACL Configurations**, we would like to have it **all static** (always deploying same set of rules).  
For **ACL Interface Attachment**, we would like to have **some variables** as below while deploying an ACL service:

Parameter | IOS  | IOS-XR | Juniper
------------ | ------------- | ------------- | -------------
interface | GigabitEthernet `[int_number]` | GigabitEthernet `[int_number]` | `[int]`
direction | `[in/out]` | `[in/out]` | `[input/output]`  

<p align="center"> <b>DISCLAIMER:</b> For the simplicity of this lab, we're assuming that for <b>IOS</b> and <b>IOS-XR</b></br> we only consider <b>GigabitEthernet</b> interfaces! </p>

### 3rd step - Design:
Based on our analysis and parameterization of the configuration provided by Carl, let's design the command that will create service of this ACL:
```
service ACL_CLUS [device] [interface] [direction]
```
For example:  
```
service ACL_CLUS IOS0 GigabitEthernet0/0 in
service ACL_CLUS JUN0 xe-0/2/0 out
```

---
<h4 align="center">[5/9]</h4>
<h4 align="center"> <a href="/readme/3.md"> :arrow_left: Start! </a> || <a href="/readme/5.md"> Create the Service! :arrow_right: </a> </h4>
